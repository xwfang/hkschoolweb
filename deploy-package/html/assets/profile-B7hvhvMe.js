import{t as e}from"./useQuery-CKzVUolF.js";import{t}from"./log-out-lFfZZgYm.js";import{t as n}from"./plus-CexD8WcT.js";import{t as r}from"./settings-C7pxaGrL.js";import{t as i}from"./trash-2-YmIUzbo7.js";import{a,c as o,j as s,l as c,n as l,s as u}from"./index-BjApUisC.js";import"./middleware-CC6Npy33.js";import{t as d}from"./auth-Db6jbZES.js";import{n as f,t as p}from"./card-DL9yw13O.js";import"./client-qtjdM-KC.js";import{t as m}from"./button-7qNH0WdN.js";import{t as h}from"./use-metadata-D11_4reW.js";import{t as g}from"./children-Db9QyB2Z.js";var _=u(`crown`,[[`path`,{d:`M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z`,key:`1vdc57`}],[`path`,{d:`M5 21h14`,key:`11awu3`}]]),v=u(`headphones`,[[`path`,{d:`M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3`,key:`1xhozi`}]]),y=c();function b(){let{user:c,logout:u,setCurrentChildId:b}=d(),x=s(),S=o(),{t:C}=l(),{getGenderLabel:w}=h(),{data:T,isLoading:E}=e({queryKey:[`children`],queryFn:g.list}),D=()=>{u(),x(`/login`)},O=c?.vip_expire_at&&new Date(c.vip_expire_at)>new Date;return(0,y.jsxs)(`div`,{className:`p-4 space-y-6`,children:[(0,y.jsxs)(`div`,{className:`flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm border relative overflow-hidden`,children:[O?(0,y.jsxs)(`div`,{className:`absolute top-0 right-0 bg-yellow-400 text-yellow-900 text-xs px-2 py-1 rounded-bl-lg font-bold flex items-center gap-1`,children:[(0,y.jsx)(_,{className:`w-3 h-3`}),` VIP`]}):(0,y.jsxs)(m,{variant:`outline`,size:`sm`,className:`absolute top-3 right-3 h-7 text-xs border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:text-indigo-800`,onClick:()=>x(`/app/subscription`),children:[(0,y.jsx)(_,{className:`w-3 h-3 mr-1`}),C(`profile.upgrade_vip`)]}),(0,y.jsx)(`div`,{className:`h-16 w-16 rounded-full flex items-center justify-center ${O?`bg-yellow-100 text-yellow-600`:`bg-gray-200 text-gray-500`}`,children:(0,y.jsx)(a,{className:`h-8 w-8`})}),(0,y.jsxs)(`div`,{className:`flex-1`,children:[(0,y.jsx)(`h2`,{className:`text-lg font-bold flex items-center gap-2`,children:C(`profile.user_title`)}),(0,y.jsx)(`p`,{className:`text-sm text-gray-500`,children:c?.identifier}),(0,y.jsx)(`div`,{className:`mt-2 flex items-center gap-2`,children:O&&(0,y.jsx)(`span`,{className:`text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full font-medium`,children:C(`profile.vip_expire`,{date:c?.vip_expire_at?new Date(c.vip_expire_at).toLocaleDateString():``})})})]})]}),(0,y.jsxs)(`div`,{className:`space-y-4`,children:[(0,y.jsxs)(`div`,{className:`flex justify-between items-center px-1`,children:[(0,y.jsx)(`h3`,{className:`text-md font-semibold`,children:C(`profile.children`)}),(0,y.jsx)(m,{variant:`ghost`,size:`sm`,className:`h-8 w-8 p-0`,onClick:()=>x(`/app/profile/add-child`),children:(0,y.jsx)(n,{className:`h-4 w-4`})})]}),E?(0,y.jsx)(`div`,{className:`text-center text-sm text-gray-500 py-4`,children:C(`common.loading`)}):T?.length===0?(0,y.jsx)(`div`,{className:`text-center text-sm text-gray-500 py-4 border rounded-lg border-dashed`,children:C(`profile.add_child`)}):T?.map(e=>(0,y.jsx)(p,{onClick:()=>b(e.id),className:`cursor-pointer active:bg-gray-50`,children:(0,y.jsxs)(f,{className:`p-4 flex justify-between items-center`,children:[(0,y.jsxs)(`div`,{children:[(0,y.jsxs)(`p`,{className:`font-medium flex items-center gap-2`,children:[e.name,(0,y.jsx)(`span`,{className:`text-xs bg-gray-100 px-1.5 py-0.5 rounded text-gray-600`,children:w(e.gender)})]}),(0,y.jsxs)(`p`,{className:`text-xs text-gray-500 mt-1`,children:[C(`profile.grade`),`: `,e.current_grade,` `,e.target_grade?`-> ${e.target_grade}`:``,` | `,C(`profile.target`),`: `,e.target_districts]})]}),(0,y.jsxs)(`div`,{className:`flex gap-2`,children:[(0,y.jsx)(m,{variant:`outline`,size:`sm`,onClick:t=>{t.stopPropagation(),x(`/app/profile/edit-child/${e.id}`)},children:C(`profile.edit`)}),(0,y.jsx)(m,{variant:`outline`,size:`sm`,className:`text-red-500 hover:text-red-600 hover:bg-red-50`,onClick:t=>{t.stopPropagation(),window.confirm(C(`child.delete_confirm`)||`Are you sure?`)&&g.delete(e.id).then(()=>{S.invalidateQueries({queryKey:[`children`]})})},children:(0,y.jsx)(i,{className:`h-4 w-4`})})]})]})},e.id)),(0,y.jsx)(m,{className:`w-full`,variant:`outline`,onClick:()=>x(`/app/profile/add-child`),children:C(`profile.add_child`)})]}),(0,y.jsxs)(`div`,{className:`space-y-2 pt-4`,children:[(0,y.jsx)(`h3`,{className:`text-md font-semibold px-1`,children:C(`profile.tools`)}),(0,y.jsx)(p,{className:`cursor-pointer active:scale-[0.99] transition-all hover:shadow-md`,onClick:()=>x(`/app/dictation`),children:(0,y.jsxs)(f,{className:`p-4 flex items-center gap-3`,children:[(0,y.jsx)(`div`,{className:`h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary`,children:(0,y.jsx)(v,{className:`h-5 w-5`})}),(0,y.jsxs)(`div`,{className:`flex-1`,children:[(0,y.jsx)(`h4`,{className:`font-medium`,children:C(`profile.dictation`,`听写助手`)}),(0,y.jsx)(`p`,{className:`text-xs text-muted-foreground`,children:C(`profile.dictation_desc`,`中小学生单词/短文听写辅助`)})]})]})})]}),(0,y.jsxs)(`div`,{className:`space-y-2 pt-4`,children:[(0,y.jsxs)(m,{variant:`ghost`,className:`w-full justify-start gap-2`,onClick:()=>x(`/app/profile/settings`),children:[(0,y.jsx)(r,{className:`h-4 w-4`}),C(`profile.settings`)]}),(0,y.jsxs)(m,{variant:`ghost`,className:`w-full justify-start gap-2 text-red-600 hover:text-red-700 hover:bg-red-50`,onClick:D,children:[(0,y.jsx)(t,{className:`h-4 w-4`}),C(`profile.logout`)]})]})]})}export{b as default};